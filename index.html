<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Calculadora de Colorante para Esmalte</title>
    <style>
        :root {
            --color-primary: #2180a0;
            --color-primary-hover: #1a6480;
            --color-primary-active: #1a5472;
            --color-bg-1: #f0f4f8;
            --color-bg-2: #ffffff;
            --color-text: #1f2121;
            --color-text-secondary: #626c7c;
            --color-border: #d4dce5;
            --color-success: #208c8d;
            --color-error: #c0152f;
            --color-warning: #a84b2f;
            --radius-base: 8px;
            --radius-lg: 12px;
            --space-8: 8px;
            --space-12: 12px;
            --space-16: 16px;
            --space-20: 20px;
            --space-24: 24px;
            --font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: var(--font-family);
            background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
            color: var(--color-text);
            padding: var(--space-20);
            min-height: 100vh;
        }

        .container {
            max-width: 900px;
            margin: 0 auto;
        }

        .header {
            text-align: center;
            margin-bottom: var(--space-24);
        }

        .header h1 {
            font-size: 2rem;
            color: var(--color-text);
            margin-bottom: var(--space-8);
        }

        .header p {
            color: var(--color-text-secondary);
            font-size: 0.95rem;
        }

        .card {
            background: var(--color-bg-2);
            border-radius: var(--radius-lg);
            padding: var(--space-24);
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            margin-bottom: var(--space-20);
        }

        .section-title {
            font-size: 1.25rem;
            font-weight: 600;
            color: var(--color-text);
            margin-bottom: var(--space-16);
            padding-bottom: var(--space-12);
            border-bottom: 2px solid var(--color-bg-1);
        }

        .form-group {
            margin-bottom: var(--space-16);
        }

        .form-label {
            display: block;
            font-weight: 500;
            margin-bottom: var(--space-8);
            font-size: 0.95rem;
            color: var(--color-text);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-16);
        }

        .form-row-2 {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: var(--space-16);
        }

        select, input[type="number"], input[type="text"] {
            width: 100%;
            padding: var(--space-12);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            font-size: 0.95rem;
            font-family: var(--font-family);
            background-color: #fafbfc;
            color: var(--color-text);
            transition: border-color 0.2s, box-shadow 0.2s;
        }

        select:focus, input[type="number"]:focus, input[type="text"]:focus {
            outline: none;
            border-color: var(--color-primary);
            box-shadow: 0 0 0 3px rgba(33, 128, 160, 0.1);
        }

        select {
            appearance: none;
            background-image: url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='16' height='16' viewBox='0 0 24 24' fill='none' stroke='%231f2121' stroke-width='2'%3E%3Cpolyline points='6 9 12 15 18 9'%3E%3C/polyline%3E%3C/svg%3E");
            background-repeat: no-repeat;
            background-position: right var(--space-12) center;
            background-size: 16px;
            padding-right: var(--space-32);
        }

        .colorants-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-16);
            margin-top: var(--space-16);
        }

        .colorant-card {
            background: var(--color-bg-1);
            border: 1px solid var(--color-border);
            border-radius: var(--radius-base);
            padding: var(--space-16);
            display: flex;
            flex-direction: column;
            gap: var(--space-12);
        }

        .colorant-card input {
            font-size: 0.9rem;
        }

        .colorant-result {
            background: linear-gradient(135deg, #e8f4f8 0%, #f0f9fc 100%);
            border: 1px solid #d0e8f2;
            border-radius: var(--radius-base);
            padding: var(--space-12);
            text-align: center;
        }

        .colorant-result-label {
            font-size: 0.8rem;
            color: var(--color-text-secondary);
            margin-bottom: var(--space-4);
        }

        .colorant-result-value {
            font-size: 1.3rem;
            font-weight: 600;
            color: var(--color-primary);
        }

        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            padding: var(--space-12) var(--space-20);
            border-radius: var(--radius-base);
            font-size: 0.95rem;
            font-weight: 600;
            cursor: pointer;
            border: none;
            transition: all 0.2s;
            font-family: var(--font-family);
        }

        .btn-primary {
            background: var(--color-primary);
            color: white;
        }

        .btn-primary:hover {
            background: var(--color-primary-hover);
        }

        .btn-secondary {
            background: var(--color-bg-1);
            color: var(--color-text);
            border: 1px solid var(--color-border);
        }

        .btn-secondary:hover {
            background: #e8ecf1;
        }

        .btn-full {
            width: 100%;
        }

        .summary-box {
            background: linear-gradient(135deg, #e8f4f8 0%, #f0f9fc 100%);
            border-left: 4px solid var(--color-primary);
            border-radius: var(--radius-base);
            padding: var(--space-16);
            margin-top: var(--space-20);
        }

        .summary-row {
            display: flex;
            justify-content: space-between;
            margin-bottom: var(--space-8);
            font-size: 0.95rem;
        }

        .summary-row-label {
            color: var(--color-text-secondary);
            font-weight: 500;
        }

        .summary-row-value {
            color: var(--color-text);
            font-weight: 600;
        }

        .info-box {
            background: #fef3cd;
            border: 1px solid #ffc107;
            border-radius: var(--radius-base);
            padding: var(--space-12);
            margin-bottom: var(--space-16);
            font-size: 0.9rem;
            color: #856404;
        }

        @media (max-width: 768px) {
            .form-row, .form-row-2 {
                grid-template-columns: 1fr;
            }

            .colorants-grid {
                grid-template-columns: 1fr;
            }

            .header h1 {
                font-size: 1.5rem;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>游꿛 Calculadora de Colorante</h1>
            <p>Calcula la cantidad exacta de colorante para tus esmaltes</p>
        </div>

        <div class="card">
            <div class="section-title">Par치metros del Esmalte</div>
            
            <div class="form-row">
                <div class="form-group">
                    <label class="form-label">Tipo de Esmalte</label>
                    <select id="esmalteTipo" onchange="actualizarCalculos()">
                        <option value="brillante">Brillante</option>
                        <option value="satinado">Satinado</option>
                        <option value="monocapa">Monocapa</option>
                    </select>
                </div>

                <div class="form-group">
                    <label class="form-label">Unidad de Volumen</label>
                    <select id="unidad" onchange="actualizarCalculos()">
                        <option value="litros">Litros (L)</option>
                        <option value="mililitros">Mililitros (mL)</option>
                    </select>
                </div>
            </div>

            <div class="form-row-2">
                <div class="form-group">
                    <label class="form-label">Cantidad a Colorear</label>
                    <input 
                        type="number" 
                        id="cantidad" 
                        placeholder="Ingresa la cantidad"
                        step="0.01"
                        min="0"
                        onchange="actualizarCalculos()"
                        oninput="actualizarCalculos()"
                    >
                </div>

                <div class="form-group">
                    <label class="form-label">Densidad del Fluido (kg/m췁)</label>
                    <input 
                        type="number" 
                        id="densidad" 
                        placeholder="Ej: 1050"
                        step="0.01"
                        min="0"
                        onchange="actualizarCalculos()"
                        oninput="actualizarCalculos()"
                    >
                </div>
            </div>

            <div class="info-box">
                <strong>Nota:</strong> Si seleccionas mililitros, la aplicaci칩n convertir치 autom치ticamente a litros para aplicar las f칩rmulas.
            </div>

            <div class="summary-box" id="resumenBox" style="display: none;">
                <div class="summary-row">
                    <span class="summary-row-label">Cantidad en Litros:</span>
                    <span class="summary-row-value" id="cantidadLitros">0.00 L</span>
                </div>
                <div class="summary-row">
                    <span class="summary-row-label">S칩lidos Calculados:</span>
                    <span class="summary-row-value" id="solidosCalculados">0.00</span>
                </div>
            </div>
        </div>

        <div class="card">
            <div class="section-title">Colorantes</div>
            <p style="color: var(--color-text-secondary); margin-bottom: var(--space-16); font-size: 0.9rem;">
                Ingresa hasta 6 colorantes con sus respectivos nombres y porcentajes
            </p>

            <div class="colorants-grid" id="colorantesContainer">
                <!-- Se genera din치micamente con JavaScript -->
            </div>

            <div style="margin-top: var(--space-20); text-align: center;">
                <button class="btn btn-secondary" onclick="limpiarColorantes()">Limpiar Colorantes</button>
                <button class="btn btn-primary" onclick="exportarResultados()" style="margin-left: var(--space-12);">Exportar Resultados</button>
            </div>
        </div>
    </div>

    <script>
        // Constantes para cada tipo de esmalte
        const constantes = {
            brillante: { c1: 44.271, c2: -8.7573 },
            satinado: { c1: 44.764, c2: -11.58 },
            monocapa: { c1: 46.75, c2: -15.389 }
        };

        // Inicializar la interfaz
        function inicializar() {
            generarColorantes();
            actualizarCalculos();
        }

        // Generar 6 campos para colorantes
        function generarColorantes() {
            const container = document.getElementById('colorantesContainer');
            container.innerHTML = '';

            for (let i = 1; i <= 6; i++) {
                const colorantCard = document.createElement('div');
                colorantCard.className = 'colorant-card';
                colorantCard.innerHTML = `
                    <div>
                        <label class="form-label">Colorante ${i}</label>
                        <input 
                            type="text" 
                            class="colorante-nombre"
                            placeholder="Nombre del colorante"
                            data-index="${i - 1}"
                        >
                    </div>
                    <div>
                        <label class="form-label">% de Color</label>
                        <input 
                            type="number" 
                            class="colorante-porcentaje"
                            placeholder="0"
                            step="0.01"
                            min="0"
                            max="100"
                            data-index="${i - 1}"
                            oninput="actualizarCalculos()"
                            onchange="actualizarCalculos()"
                        >
                    </div>
                    <div class="colorant-result">
                        <div class="colorant-result-label">Gramos a Adicionar</div>
                        <div class="colorant-result-value" data-resultado="${i - 1}">
                            0.00 g
                        </div>
                    </div>
                `;
                container.appendChild(colorantCard);
            }
        }

        // Funci칩n principal de c치lculo
        function actualizarCalculos() {
            // Obtener valores
            const esmalteTipo = document.getElementById('esmalteTipo').value;
            const unidad = document.getElementById('unidad').value;
            let cantidad = parseFloat(document.getElementById('cantidad').value) || 0;
            const densidad = parseFloat(document.getElementById('densidad').value) || 0;

            // Convertir a litros si es necesario
            if (unidad === 'mililitros') {
                cantidad = cantidad / 1000;
            }

            // Mostrar cantidad en litros
            document.getElementById('cantidadLitros').textContent = cantidad.toFixed(4) + ' L';

            // Obtener constantes
            const { c1, c2 } = constantes[esmalteTipo];

            // Calcular s칩lidos: ((densidad * c1) + c2) / 100
            const solidos = ((densidad * c1) + c2) / 100;
            document.getElementById('solidosCalculados').textContent = solidos.toFixed(6);

            // Mostrar resumen si hay valores
            if (cantidad > 0 && densidad > 0) {
                document.getElementById('resumenBox').style.display = 'block';
            }

            // Calcular para cada colorante
            const colorantesNombres = document.querySelectorAll('.colorante-nombre');
            const colorantesPorcentajes = document.querySelectorAll('.colorante-porcentaje');
            const resultados = document.querySelectorAll('[data-resultado]');

            colorantesPorcentajes.forEach((input, index) => {
                const porcentaje = parseFloat(input.value) || 0;
                const nombre = colorantesNombres[index].value;

                // F칩rmula CORRECTA: cantidad (L) * densidad * solidos * (porcentaje / 100)
                const gramos = cantidad * densidad * solidos * (porcentaje / 100)*1000;

                // Mostrar resultado
                if (nombre || porcentaje > 0) {
                    resultados[index].textContent = gramos.toFixed(2) + ' g';
                } else {
                    resultados[index].textContent = '0.00 g';
                }
            });
        }

        // Limpiar todos los colorantes
        function limpiarColorantes() {
            document.querySelectorAll('.colorante-nombre').forEach(input => input.value = '');
            document.querySelectorAll('.colorante-porcentaje').forEach(input => input.value = '');
            actualizarCalculos();
        }

        // Exportar resultados como texto
        function exportarResultados() {
            const esmalteTipo = document.getElementById('esmalteTipo').value;
            const unidad = document.getElementById('unidad').value;
            let cantidad = parseFloat(document.getElementById('cantidad').value) || 0;
            const densidad = parseFloat(document.getElementById('densidad').value) || 0;

            if (unidad === 'mililitros') {
                cantidad = cantidad / 1000;
            }

            let texto = '=== REPORTE DE COLORANTES ===\n\n';
            texto += `Tipo de Esmalte: ${esmalteTipo.toUpperCase()}\n`;
            texto += `Cantidad: ${cantidad.toFixed(4)} L\n`;
            texto += `Densidad: ${densidad} kg/m췁\n`;
            texto += `\n--- COLORANTES ---\n`;

            const colorantesNombres = document.querySelectorAll('.colorante-nombre');
            const colorantesPorcentajes = document.querySelectorAll('.colorante-porcentaje');
            const resultados = document.querySelectorAll('[data-resultado]');

            colorantesNombres.forEach((input, index) => {
                const nombre = input.value || `Colorante ${index + 1}`;
                const porcentaje = parseFloat(colorantesPorcentajes[index].value) || 0;
                const gramos = resultados[index].textContent;

                if (porcentaje > 0 || input.value) {
                    texto += `\n${nombre}:\n`;
                    texto += `  Porcentaje: ${porcentaje}%\n`;
                    texto += `  Cantidad: ${gramos}\n`;
                }
            });

            // Descargar como archivo de texto
            const elemento = document.createElement('a');
            elemento.setAttribute('href', 'data:text/plain;charset=utf-8,' + encodeURIComponent(texto));
            elemento.setAttribute('download', 'colorantes_' + new Date().toISOString().split('T')[0] + '.txt');
            elemento.style.display = 'none';
            document.body.appendChild(elemento);
            elemento.click();
            document.body.removeChild(elemento);
        }

        // Iniciar cuando carga la p치gina
        window.addEventListener('DOMContentLoaded', inicializar);
    </script>
</body>
</html>
